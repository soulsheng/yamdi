cuda面向三维动画的性能评价及优化框架


摘要：搭建一套CUDA性能评价与优化一体化框架CudaPOF，CudaPOF包括可行性定性评估、回报率定量测算、性能优化链，基于CudaPOF
实践一个VR动画性能优化应用实例。框架指导实例，实例初步检验框架的可行性。此外本文结合其它几个典型实例，进一步印证框架的
通用性和稳定性，从而增强CUDA成果的评价依据和参考意义。

关键字：CUDA 框架 VR 优化 性能 动画 

1. 绪论 

三维角色动画一直是计算机图形学领域的研究热点，角色动画不仅外表逼真，而且拥有丰富细腻的表情和动作。随着角色动画越来越
逼近现实，其内部细节越来越丰富，蕴含的数据量和计算量越来越大。当角色动画复杂到一定程度，一般的计算机不能实时渲染动画，
于是研究人员采用高性能技术应对这种需求，包括CPU并行运算和GPU并行运算。
[动机出发点 问题]  

在高性能领域，GPU性能提升速度远远超过CPU，GPU并行运算技术可用于提升复杂角色动画的渲染效率，实现动画高帧速实时渲染。
文章x采用CG这一GPGPU技术实现骨骼动画的渲染加速，达到较好效果，这一方法实现方式较为复杂，而且没有充分发挥GPU的加速潜力。
本文拟采用CUDA技术，在一定的性能评价和优化框架内，实现动画的加速。
[现有解决方案、改进解决方案]

2. 评价框架 

CUDA并行方案，有它的适于范围，需要结合CUDA软硬件特性和问题特性两方面，从而决定以下四点：是否可用？是否值得用？如果可以而且
值得，如何评估优化的理论峰值加速比？如何逼近最优化加速比？最后一个问题将在下一节阐述，本节从定性和定量两个层面解决
前三个问题。

从问题本身出发，优化往往针对局部的性能瓶颈，通过局部瓶颈的优化，将加速效果传递到问题整体。这一过程可以通过Amdal定律描述，
S(N)=1/((1-P)+P/N)，其中P代表瓶颈系数，N代表针对瓶颈的加速比，S(N)是问题整体的加速比，瓶颈系数是瓶颈耗时与问题总耗时的
比值。例如：瓶颈局部加速比设为常数N=100，当P=10%，S(N)=1.1；当P=90%，S(N)=9.9。可见，同样对瓶颈加速100倍，前者因为瓶颈
不明显或者定位不准，问题整体的性能几乎不变，而后者净提升将近9倍。得出定性分析结果：瓶颈系数过小，不值得加速。
当局部加速比N无限提升时，前者S(N)=1.1，后者S(N)=10。进一步拟定
有效加速比为2，


Amdal、定性评价、定量估算、计算访存密度、计算访存并行隐藏延迟 


3. 优化链 

访存效率，数据结构对齐存储、合并访问、提升cache命中率； 

指令效率，指令级并行ILP、指令调度； 


4. VR实例 

定性分析 

定量公式 

实践，flaot4 拆分矩阵 索引排序；指令没必要，不影响效率 


5. 通用实例 

大型矩阵相乘MatrixMultiply、快速傅里叶变换FFT、蒙特卡洛计算π值 

计算高密度类型、访存高密度类型、叠加类型 


6. 总结 

本文设计一套CUDA性能评价框架，并用于优化VR动画，框架估算理论加速比峰值为20，实验得到加速比为19，已经较大程度发挥了加速的潜力，剩余极小的加速空间。 

7. 文献 


 


